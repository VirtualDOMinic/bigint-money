import { expect } from 'chai';
import { bigintToFixed, Round } from '../src/util';

describe('bigintToFixed', () => {

  const tests = [
    [                 1n, 0, '0'],
    [ 1_000_000_000_000n, 0, '1'],
    [   100_000_000_000n, 0, '0'],
    [   100_000_000_000n, 1, '0.1'],
    [    10_000_000_000n, 2, '0.01'],
    [     4_000_000_000n, 2, '0.00'],
    [     5_000_000_000n, 2, '0.00'],
    [     6_000_000_000n, 2, '0.01'],
    [   990_000_000_000n, 2, '0.99'],
    [   995_000_000_000n, 2, '1.00'],
    [                -1n, 0, '0'],
    [-1_000_000_000_000n, 0, '-1'],
    [  -100_000_000_000n, 0, '0'],
    [  -100_000_000_000n, 1, '-0.1'],
    [   -10_000_000_000n, 2, '-0.01'],
    [    -4_000_000_000n, 2, '-0.00'],
    [    -5_000_000_000n, 2, '-0.00'],
    [    -6_000_000_000n, 2, '-0.01'],
    [  -990_000_000_000n, 2, '-0.99'],
    [  -995_000_000_000n, 2, '-1.00'],
  ];

  for(const test of tests) {
    it(`bigintToFixed(${test[0]},${test[1]}) === ${test[2]}`, () => {

      const result = bigintToFixed(<bigint>test[0], <number>test[1], Round.BANKERS);
      expect(result).to.equal(test[2]);

    });
  }

});
